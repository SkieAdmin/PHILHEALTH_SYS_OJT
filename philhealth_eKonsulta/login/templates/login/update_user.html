{% extends 'base.html' %}
{% block title %}Update User{% endblock %}
{% block content %}

<!-- (Gocotano Changes) - Created update_user.html template for editing all user information -->
<h2>Update Account</h2>

<form method="post">
    {% csrf_token %}

    <h3>Account Information</h3>
    <table border="1">
        <tr>
            <th>Username</th>
            <td><input type="text" name="username" value="{{ user.username }}" required></td>
        </tr>
        <tr>
            <th>Email</th>
            <td><input type="email" name="email" value="{{ user.email }}" required></td>
        </tr>
        <tr>
            <th>Role</th>
            <td>
                <select name="role" required>
                    <option value="DOCTOR" {% if user.role == "DOCTOR" %}selected{% endif %}>Doctor</option>
                    <option value="SECRETARY" {% if user.role == "SECRETARY" %}selected{% endif %}>Secretary</option>
                    <option value="FINANCE" {% if user.role == "FINANCE" %}selected{% endif %}>Finance</option>
                </select>
            </td>
        </tr>
    </table>

    {% if profile %}
    <h3>Profile Information</h3>
    <table border="1">
        <tr>
            <th>First Name</th>
            <td><input type="text" name="first_name" value="{{ profile.first_name }}" required></td>
        </tr>
        <tr>
            <th>Last Name</th>
            <td><input type="text" name="last_name" value="{{ profile.last_name }}" required></td>
        </tr>
        <tr>
            <th>Employee ID</th>
            <td><input type="text" name="employee_id" value="{{ profile.employee_id }}" required></td>
        </tr>

        <!-- (Gocotano Changes) - Role-specific fields -->
        {% if user.role == "DOCTOR" %}
        <tr>
            <th>Specialization</th>
            <td><input type="text" name="specialization" value="{{ profile.specialization }}" required></td>
        </tr>
        <tr>
            <th>License Number</th>
            <td><input type="text" name="license_number" value="{{ profile.license_number }}" required></td>
        </tr>
        {% elif user.role == "SECRETARY" %}
        <tr>
            <th>Department</th>
            <td><input type="text" name="department" value="{{ profile.department }}" required></td>
        </tr>
        {% elif user.role == "FINANCE" %}
        <tr>
            <th>Position</th>
            <td><input type="text" name="position" value="{{ profile.position }}" required></td>
        </tr>
        {% endif %}
        <!-- (End Role-specific fields) -->

        <tr>
            <th>Phone</th>
            <td><input type="text" name="phone" value="{{ profile.phone }}" required></td>
        </tr>
        <tr>
            <th>Profile Email</th>
            <td><input type="email" name="profile_email" value="{{ profile.email }}" required></td>
        </tr>
    </table>
    {% else %}
    <p>No profile information available for this user.</p>
    {% endif %}

    <br>
    <button type="submit">Update</button>
    <a href="{% url 'list_users' %}"><button type="button">Cancel</button></a>
</form>
<!-- (End Gocotano Changes) -->

{% endblock %}
